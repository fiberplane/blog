---
interface Props {
  type?: 'note' | 'tip' | 'caution' | 'danger';
  title?: string;
}

const { type = 'note', title } = Astro.props;

const icons = {
  note: '‚ÑπÔ∏è',
  tip: 'üí°',
  caution: '‚ö†Ô∏è',
  danger: 'üö®',
};

const titles = {
  note: title || 'Note',
  tip: title || 'Tip',
  caution: title || 'Caution',
  danger: title || 'Danger',
};
---

<aside class={`aside aside-${type}`}>
  <p class="aside-title">
    <span class="aside-icon">{icons[type]}</span>
    {titles[type]}
  </p>
  <div class="aside-content">
    <slot />
  </div>
</aside>

<style>
  .aside {
    margin: 1.5rem 0;
    padding: 1rem 1.25rem;
    border-left: 4px solid;
    border-radius: 0.375rem;
    background-color: var(--color-bg-secondary);
  }

  .aside-note {
    border-color: #3b82f6;
    background-color: #eff6ff;
  }

  .aside-tip {
    border-color: #10b981;
    background-color: #f0fdf4;
  }

  .aside-caution {
    border-color: #f59e0b;
    background-color: #fffbeb;
  }

  .aside-danger {
    border-color: #ef4444;
    background-color: #fef2f2;
  }

  @media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) .aside-note {
      background-color: #1e3a8a;
      border-color: #60a5fa;
    }

    :root:not([data-theme="light"]) .aside-tip {
      background-color: #064e3b;
      border-color: #34d399;
    }

    :root:not([data-theme="light"]) .aside-caution {
      background-color: #78350f;
      border-color: #fbbf24;
    }

    :root:not([data-theme="light"]) .aside-danger {
      background-color: #7f1d1d;
      border-color: #f87171;
    }
  }

  :root[data-theme="dark"] .aside-note {
    background-color: #1e3a8a;
    border-color: #60a5fa;
  }

  :root[data-theme="dark"] .aside-tip {
    background-color: #064e3b;
    border-color: #34d399;
  }

  :root[data-theme="dark"] .aside-caution {
    background-color: #78350f;
    border-color: #fbbf24;
  }

  :root[data-theme="dark"] .aside-danger {
    background-color: #7f1d1d;
    border-color: #f87171;
  }

  .aside-title {
    margin: 0 0 0.75rem 0;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-heading);
  }

  .aside-icon {
    font-size: 1.25rem;
  }

  .aside-content {
    color: var(--color-text);
  }

  .aside-content :global(p) {
    margin: 0.5rem 0;
  }

  .aside-content :global(p:first-child) {
    margin-top: 0;
  }

  .aside-content :global(p:last-child) {
    margin-bottom: 0;
  }
</style>
